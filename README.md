# test-task

### Краткое описание задачи:
* На каждый запрос возвращать значение счетчика, считающего общее количество обработанных сервером запросов за последние 60 секунд;
* Продолжать возвращать корректное значение счетчика после перезапуска приложения используя персистентное хранилище.

### Хранение данных
Состаяние после остановки приложения хранится в файле.
Все настройки хранятся в файлах конфигах, которые выбираются в зависимости от окружения
По дефолту это  `configs/development.json`

###### Настройки вынесеные в конфиг:
`port` - порт на котором запускается приложение 
`storage_name` - имя файла  в котором будет храниться состояние после остановки 
`url_pattern` - url с которого будет проходить подсчет запросов
`period` - время в секундах ха которое подсчитывается количество запросов

### Запуск
Для запуска из докера можно использовать команду `docker-compose up`
в этом случае для остановки приложения лучше всего использовать команду `docker kill -s HUP test-task_testtask_1`
где `test-task_testtask_1` - имя контейнера оно может принимать любое значение. Это надо для корректной обработки сигнала 
внутри приложения
Запуск из кода - `make run env=prod`
Сборка бинарника для докера - `make build-linux`
Запуск тестов - `make test`
